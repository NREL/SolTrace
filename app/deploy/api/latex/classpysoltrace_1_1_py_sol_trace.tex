\hypertarget{classpysoltrace_1_1_py_sol_trace}{}\doxysection{pysoltrace.\+Py\+Sol\+Trace Class Reference}
\label{classpysoltrace_1_1_py_sol_trace}\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_1_1_optics}{Optics}}
\item 
class \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_1_1_stage}{Stage}}
\item 
class \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_1_1_sun}{Sun}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a42165049122ad01472c01674c003b1fe}\label{classpysoltrace_1_1_py_sol_trace_a42165049122ad01472c01674c003b1fe}} 
def {\bfseries \+\_\+\+\_\+init\+\_\+\+\_\+} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a9eeadcf9efd43a08078dac709c8e7c0f}{clear\+\_\+context}} (self)
\item 
int \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_ac7c0f2dfeb4c61a710e1d8f616abdba8}{get\+\_\+num\+\_\+optics}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_aa0681f78104e3f6894222097343883b1}{add\+\_\+optic}} (self, str optic\+\_\+name)
\item 
int \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a6a7f6c2dde7a73f773967baeb02e887a}{delete\+\_\+optic}} (self, int optic\+\_\+id)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_aab094a9f2747a5875228e4c875f30e65}{add\+\_\+sun}} (self)
\item 
int \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a7acc829eed011aed7688308e7a3f79fe}{get\+\_\+num\+\_\+stages}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_ad8f398b1a500cbf0cdf8ed52238c3544}{add\+\_\+stage}} (self)
\item 
int \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a3e7acc7cf17a930a36c42d0ddaf86374}{delete\+\_\+stage}} (self, int stage\+\_\+id)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a94edc099c9ce0d62d9619a41c2ea844b}{run}} (self, int seed=-\/1, as\+\_\+power\+\_\+tower=False)
\item 
int \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a7a981000d4125020f387e54113c64291}{get\+\_\+num\+\_\+intersections}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_afd7dacb40a08758f33b7ddd7a13aa203}{get\+\_\+intersect\+\_\+locations}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_aeeec345624b1c13c8c81ce05b3cf1d60}{get\+\_\+intersect\+\_\+cosines}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a838d8fa54ce720eec45b6ac9966c3c52}{get\+\_\+intersect\+\_\+elementmap}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a7dd465903843cbef48f9407572a03807}{get\+\_\+intersect\+\_\+stagemap}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_aa7f665a07f81e2957bd9a55c02163108}{get\+\_\+intersect\+\_\+raynumbers}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a5eea6c46e195a5316e0a4d7239824c67}{get\+\_\+sun\+\_\+stats}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a3abc62a49c76f1e9f1956c7e136f29b3}{get\+\_\+ray\+\_\+dataframe}} (self)
\item 
bool \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a2f8f2afc0d50794f8286a214b9015fe3}{validate}} (self)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a3795434bcda6b1d5010268caccc89876}{util\+\_\+calc\+\_\+euler\+\_\+angles}} (self, origin, aimpoint, zrot)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a61152a58b3fce9f1ee977ed652820008}{util\+\_\+transform\+\_\+to\+\_\+local}} (self, posref, cosref, origin, rreftoloc)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a60eaa62e41ad6d2b5441b815cb30660e}{util\+\_\+transform\+\_\+to\+\_\+ref}} (self, posloc, cosloc, origin, rloctoref)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a4236679544a6427ef0db48bb9a5c7e98}{util\+\_\+matrix\+\_\+vector\+\_\+mult}} (self, m, v)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a333bbf5acbf5c1cb32e604b32d4f948e}{util\+\_\+calc\+\_\+transforms}} (self, euler)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_aa5541b68fab7b61ae6497944a9e2ec8d}{util\+\_\+matrix\+\_\+transpose}} (self, m)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_ab4875d628e1f02b6429498116afe2683}{util\+\_\+rotation\+\_\+arbitrary}} (self, theta, axis, axloc, pt)
\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_ace20213bdc5aa78b94a210cf55582987}\label{classpysoltrace_1_1_py_sol_trace_ace20213bdc5aa78b94a210cf55582987}} 
def {\bfseries util\+\_\+calc\+\_\+unitvect} (self, vect)
\item 
float \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_aed7abf720015680fbfff07bd96609987}{util\+\_\+calc\+\_\+zrot\+\_\+azel}} (self, vect)
\item 
def \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_a2bee17e5e943c63646f691ebaff4a1eb}{write\+\_\+soltrace\+\_\+input\+\_\+file}} (self, str path)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a18527338d8a83fa4b59f5811887adcbf}\label{classpysoltrace_1_1_py_sol_trace_a18527338d8a83fa4b59f5811887adcbf}} 
{\bfseries optics}
\begin{DoxyCompactList}\small\item\em List of \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_1_1_optics}{Optics}} instances. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a6f6cfafdcdbf02bac23dd52d31672b3a}\label{classpysoltrace_1_1_py_sol_trace_a6f6cfafdcdbf02bac23dd52d31672b3a}} 
{\bfseries stages}
\begin{DoxyCompactList}\small\item\em List of \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_1_1_stage}{Stage}} instances. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_ab565b43f63fb7b455621fb483a743126}\label{classpysoltrace_1_1_py_sol_trace_ab565b43f63fb7b455621fb483a743126}} 
{\bfseries num\+\_\+ray\+\_\+hits}
\begin{DoxyCompactList}\small\item\em Minimum number of simulation ray hits. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_af92927665911b78086efada939bd4a5a}\label{classpysoltrace_1_1_py_sol_trace_af92927665911b78086efada939bd4a5a}} 
{\bfseries max\+\_\+rays\+\_\+traced}
\begin{DoxyCompactList}\small\item\em Maximum number of ray hits in a simulation. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_ae21e812c154add5398a500a06f9e5732}\label{classpysoltrace_1_1_py_sol_trace_ae21e812c154add5398a500a06f9e5732}} 
{\bfseries is\+\_\+sunshape}
\begin{DoxyCompactList}\small\item\em Flag indicating whether sunshape should be included. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a0dbeee876ff8ac38d65de4c28de66273}\label{classpysoltrace_1_1_py_sol_trace_a0dbeee876ff8ac38d65de4c28de66273}} 
{\bfseries is\+\_\+surface\+\_\+errors}
\begin{DoxyCompactList}\small\item\em Flag indicating whether surface errors should be included. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a60c7ba3b669493365fcb9b7a9870ce27}\label{classpysoltrace_1_1_py_sol_trace_a60c7ba3b669493365fcb9b7a9870ce27}} 
{\bfseries sun}
\begin{DoxyCompactList}\small\item\em Object containing \mbox{\hyperlink{classpysoltrace_1_1_py_sol_trace_1_1_sun}{Sun}} class data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}A class to access PySolTrace (SolTrace's Python API)

Attributes
----------
pdll : ctypes.CDLL
    loaded SolTrace library of exported functions
p_data 
    Memory location for soltrace context
optics : [PySolTrace.Optics,]
    List of Optics instances
stages : [PySolTrace.Stage,]
    List of Stage instances
num_ray_hits : int
    Minimum number of simulation ray hits 
max_rays_traced : int
    Maximum number of ray hits in a simulation
is_sunshape : bool
    Flag indicating whether sunshape should be included
is_surface_errors : bool
    Flag indicating whether surface errors should be included

Methods
-------
clear_context 
    Frees SolTrace instance from memory at p_data
get_num_optics 
    Get number of optical elements in the SolTrace context
add_optics 
    Instantiates a new PySolTrace.Optics object
delete_optic 
    Delete Optics instance
add_sun 
    Adds Sun instance
get_num_stages 
    Get number of Stages
add_stage 
    Adds Stage instance
validate 
    Detect common errors in simulation setup 
run 
    Runs SolTrace simulation
get_num_intersections 
    Get the number of simulation ray intersections
get_ray_dataframe 
    Get all simulation ray data in pandas dataframe
get_intersect_locations 
    Get ray intersection locations
get_intersect_cosines 
    Get ray intersection cosines / direction vectors
get_intersect_elementmap 
    Get ray intersection associated element
get_intersect_stagemap 
    Get ray intersection associated stage
get_intersect_raynumbers 
    Get ray intersection number
get_sun_stats 
    Get information on sun box
util_calc_euler_angles 
    Calculate Euler angles for a position, aimpoint, and rotation
util_transform_to_local 
    Transform a coordinate system from reference to a local system
util_transform_to_ref 
    Transform a coordinate system from local to reference system
util_matrix_vector_mult 
    Calculate product of a square matrix and a vector
util_calc_transforms 
    Calculate matrix transforms
util_matrix_transpose 
    Compute the transpose of a matrix
\end{DoxyVerb}
 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_aa0681f78104e3f6894222097343883b1}\label{classpysoltrace_1_1_py_sol_trace_aa0681f78104e3f6894222097343883b1}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!add\_optic@{add\_optic}}
\index{add\_optic@{add\_optic}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{add\_optic()}{add\_optic()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+add\+\_\+optic (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{str}]{optic\+\_\+name }\end{DoxyParamCaption})}

\begin{DoxyVerb}Instantiates a new PySolTrace.Optics object, adding it to the optics list, and
creating the optics in the SolTrace context. This method does not set optics
properties, which instead is done using the Optics.Create method.

Parameters
----------
optic_name : string
    Unique name for this Optics instance.

Returns
----------
Optics 
    Reference to the Optics object that was just created.
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_ad8f398b1a500cbf0cdf8ed52238c3544}\label{classpysoltrace_1_1_py_sol_trace_ad8f398b1a500cbf0cdf8ed52238c3544}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!add\_stage@{add\_stage}}
\index{add\_stage@{add\_stage}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{add\_stage()}{add\_stage()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+add\+\_\+stage (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Adds a new Stage instance to the PySolTrace.stages list and creates the stage in
the SolTrace context. The Stage ID is automatically generated based on the number 
of current stages.

Returns
----------
PySolTrace.Stage 
    Reference to the newly created Stage object. 
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_aab094a9f2747a5875228e4c875f30e65}\label{classpysoltrace_1_1_py_sol_trace_aab094a9f2747a5875228e4c875f30e65}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!add\_sun@{add\_sun}}
\index{add\_sun@{add\_sun}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{add\_sun()}{add\_sun()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+add\+\_\+sun (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Instantiates a PySolTrace.Sun object and associates it with the PySolTrace.sun member.
This does not create or modify the Sun data in the SolTrace context.

Returns
----------
PySolTrace.Sun 
    Reference to newly created Sun instance.
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a9eeadcf9efd43a08078dac709c8e7c0f}\label{classpysoltrace_1_1_py_sol_trace_a9eeadcf9efd43a08078dac709c8e7c0f}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!clear\_context@{clear\_context}}
\index{clear\_context@{clear\_context}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{clear\_context()}{clear\_context()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+clear\+\_\+context (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Frees SolTrace instance from memory

Returns
-------
bool
    True if successful, False otherwise
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a6a7f6c2dde7a73f773967baeb02e887a}\label{classpysoltrace_1_1_py_sol_trace_a6a7f6c2dde7a73f773967baeb02e887a}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!delete\_optic@{delete\_optic}}
\index{delete\_optic@{delete\_optic}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{delete\_optic()}{delete\_optic()}}
{\footnotesize\ttfamily  int pysoltrace.\+Py\+Sol\+Trace.\+delete\+\_\+optic (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{int}]{optic\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Delete Optics instance. The optics object is removed from the PySolTrace.optics list and 
from the SolTrace context.

Parameters
----------
optic_id : int
    ID associated with the optics to be deleted

Returns
----------
int 
    1 if successful, 0 otherwise
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a3e7acc7cf17a930a36c42d0ddaf86374}\label{classpysoltrace_1_1_py_sol_trace_a3e7acc7cf17a930a36c42d0ddaf86374}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!delete\_stage@{delete\_stage}}
\index{delete\_stage@{delete\_stage}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{delete\_stage()}{delete\_stage()}}
{\footnotesize\ttfamily  int pysoltrace.\+Py\+Sol\+Trace.\+delete\+\_\+stage (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{int}]{stage\+\_\+id }\end{DoxyParamCaption})}

\begin{DoxyVerb}Delete Stage instance. The stage object is removed from the PySolTrace.stages list and 
from the SolTrace context.

Parameters
----------
stage_id : int
    ID associated with the stage to be deleted

Returns
----------
int 
    1 if successful, 0 otherwise 
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_aeeec345624b1c13c8c81ce05b3cf1d60}\label{classpysoltrace_1_1_py_sol_trace_aeeec345624b1c13c8c81ce05b3cf1d60}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_intersect\_cosines@{get\_intersect\_cosines}}
\index{get\_intersect\_cosines@{get\_intersect\_cosines}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_intersect\_cosines()}{get\_intersect\_cosines()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+intersect\+\_\+cosines (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}[Post simulation] Get the ray intersection cosines (direction vectors) in global coordinates.

Returns
----------
[[cx,cy,cz],]
    2D array of ray vectors associated with the intersection at the same index.
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a838d8fa54ce720eec45b6ac9966c3c52}\label{classpysoltrace_1_1_py_sol_trace_a838d8fa54ce720eec45b6ac9966c3c52}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_intersect\_elementmap@{get\_intersect\_elementmap}}
\index{get\_intersect\_elementmap@{get\_intersect\_elementmap}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_intersect\_elementmap()}{get\_intersect\_elementmap()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+intersect\+\_\+elementmap (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}[Post simulation] Get the elements associated with the ray intersection. The element numbers are
interpreted as follows:
    0     | Ray did not hit an element in this stage 
    >= +1 | Ray hit this element ID and was reflected / refracted 
    <= -1 | Ray hit this element ID and was absorbed

Returns
----------
[int,] 
    2D array of integers associated with the intersection at the same index.
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_afd7dacb40a08758f33b7ddd7a13aa203}\label{classpysoltrace_1_1_py_sol_trace_afd7dacb40a08758f33b7ddd7a13aa203}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_intersect\_locations@{get\_intersect\_locations}}
\index{get\_intersect\_locations@{get\_intersect\_locations}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_intersect\_locations()}{get\_intersect\_locations()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+intersect\+\_\+locations (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}[Post simulation] Get the ray intersection locations in global coordinates.

Returns
----------
[[x,y,z],] 
    2D array of ray positions
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_aa7f665a07f81e2957bd9a55c02163108}\label{classpysoltrace_1_1_py_sol_trace_aa7f665a07f81e2957bd9a55c02163108}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_intersect\_raynumbers@{get\_intersect\_raynumbers}}
\index{get\_intersect\_raynumbers@{get\_intersect\_raynumbers}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_intersect\_raynumbers()}{get\_intersect\_raynumbers()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+intersect\+\_\+raynumbers (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}[Post simulation] Get the ray intersection numbers. 

Returns
----------
[int,]
    List of ray intersection numbers.
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a7dd465903843cbef48f9407572a03807}\label{classpysoltrace_1_1_py_sol_trace_a7dd465903843cbef48f9407572a03807}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_intersect\_stagemap@{get\_intersect\_stagemap}}
\index{get\_intersect\_stagemap@{get\_intersect\_stagemap}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_intersect\_stagemap()}{get\_intersect\_stagemap()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+intersect\+\_\+stagemap (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}[Post simulation] Get the stage associated with the ray intersection at the same positional index.

Returns
----------
[int,] 
    List of stages associated with the intersection at the same index.
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a7a981000d4125020f387e54113c64291}\label{classpysoltrace_1_1_py_sol_trace_a7a981000d4125020f387e54113c64291}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_num\_intersections@{get\_num\_intersections}}
\index{get\_num\_intersections@{get\_num\_intersections}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_num\_intersections()}{get\_num\_intersections()}}
{\footnotesize\ttfamily  int pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+num\+\_\+intersections (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}[Post simulation] Get the number of ray intersections detected in the simulation.

Returns
----------
int 
    Number of intersections
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_ac7c0f2dfeb4c61a710e1d8f616abdba8}\label{classpysoltrace_1_1_py_sol_trace_ac7c0f2dfeb4c61a710e1d8f616abdba8}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_num\_optics@{get\_num\_optics}}
\index{get\_num\_optics@{get\_num\_optics}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_num\_optics()}{get\_num\_optics()}}
{\footnotesize\ttfamily  int pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+num\+\_\+optics (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get number of optical elements in the SolTrace context

Returns
----------
int 
    number of elements
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a7acc829eed011aed7688308e7a3f79fe}\label{classpysoltrace_1_1_py_sol_trace_a7acc829eed011aed7688308e7a3f79fe}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_num\_stages@{get\_num\_stages}}
\index{get\_num\_stages@{get\_num\_stages}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_num\_stages()}{get\_num\_stages()}}
{\footnotesize\ttfamily  int pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+num\+\_\+stages (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Retrieve the number of stages that have been created in the SolTrace context. 

Returns
----------
int 
    Number of stages.
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a3abc62a49c76f1e9f1956c7e136f29b3}\label{classpysoltrace_1_1_py_sol_trace_a3abc62a49c76f1e9f1956c7e136f29b3}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_ray\_dataframe@{get\_ray\_dataframe}}
\index{get\_ray\_dataframe@{get\_ray\_dataframe}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_ray\_dataframe()}{get\_ray\_dataframe()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+ray\+\_\+dataframe (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get a pandas dataframe with all of the ray data from the simulation. 

Returns
----------
Pandas.DataFrame 
    with columns:
    loc_x   | Ray hit location, x-coordinate 
    loc_y   | Ray hit location, y-coordinate 
    loc_z   | Ray hit location, z-coordinate 
    cos_x   | Ray directional vector, x-component
    cos_y   | Ray directional vector, y-component
    cos_z   | Ray directional vector, z-component
    element | Element associated with ray hit
    stage   | Stage associated with ray hit
    number  | Ray number
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a5eea6c46e195a5316e0a4d7239824c67}\label{classpysoltrace_1_1_py_sol_trace_a5eea6c46e195a5316e0a4d7239824c67}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!get\_sun\_stats@{get\_sun\_stats}}
\index{get\_sun\_stats@{get\_sun\_stats}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{get\_sun\_stats()}{get\_sun\_stats()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+get\+\_\+sun\+\_\+stats (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Get information on the sun box. 

Returns
----------
dict      
    Keys in the return dictionary are:
    'xmin' --> Minimum x extent of the bounding box for hit testing 
    'xmax' --> Maximum x extent of the bounding box for hit testing 
    'ymin' --> Minimum y extent of the bounding box for hit testing 
    'ymax' --> Maximum y extent of the bounding box for hit testing 
    'nsunrays' --> Number of sun rays simulated
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a94edc099c9ce0d62d9619a41c2ea844b}\label{classpysoltrace_1_1_py_sol_trace_a94edc099c9ce0d62d9619a41c2ea844b}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!run@{run}}
\index{run@{run}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+run (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{int }]{seed = {\ttfamily -\/1},  }\item[{}]{as\+\_\+power\+\_\+tower = {\ttfamily False} }\end{DoxyParamCaption})}

\begin{DoxyVerb}Run SolTrace simulation.

Parameters
----------
seed : int
    Seed for random number generator. [-1] for random seed.
as_power_tower : bool
    Flag indicating simulation should be processed as power 
    tower / central receiver type, with corresponding efficiency adjustments.

Returns
----------
int 
    Simulation return value
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a3795434bcda6b1d5010268caccc89876}\label{classpysoltrace_1_1_py_sol_trace_a3795434bcda6b1d5010268caccc89876}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!util\_calc\_euler\_angles@{util\_calc\_euler\_angles}}
\index{util\_calc\_euler\_angles@{util\_calc\_euler\_angles}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{util\_calc\_euler\_angles()}{util\_calc\_euler\_angles()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+util\+\_\+calc\+\_\+euler\+\_\+angles (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{origin,  }\item[{}]{aimpoint,  }\item[{}]{zrot }\end{DoxyParamCaption})}

\begin{DoxyVerb}Calculate the Euler angles associated with a given origin, aimpoint, and z-axis rotation. 

Parameters
----------
origin : [float,*3]
    Origin of the coordinate system
aimpoint : [float,*3]
    Aimpoint of the vector originating at the origin
zrot : float
    Rotation around the z-axis coordinate (degr)

Returns
----------
list
    Calculated Euler angles (rad)
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a333bbf5acbf5c1cb32e604b32d4f948e}\label{classpysoltrace_1_1_py_sol_trace_a333bbf5acbf5c1cb32e604b32d4f948e}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!util\_calc\_transforms@{util\_calc\_transforms}}
\index{util\_calc\_transforms@{util\_calc\_transforms}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{util\_calc\_transforms()}{util\_calc\_transforms()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+util\+\_\+calc\+\_\+transforms (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{euler }\end{DoxyParamCaption})}

\begin{DoxyVerb}Calculate matrix transforms

Parameters
----------
euler : [float,]*3
    Euler angles

Returns
----------
(dict) A dictionary containing the keys:
    rreftoloc : Transformation matrix from Reference to Local system
    rloctoref : Transformation matrix from Local to Reference system
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_aed7abf720015680fbfff07bd96609987}\label{classpysoltrace_1_1_py_sol_trace_aed7abf720015680fbfff07bd96609987}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!util\_calc\_zrot\_azel@{util\_calc\_zrot\_azel}}
\index{util\_calc\_zrot\_azel@{util\_calc\_zrot\_azel}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{util\_calc\_zrot\_azel()}{util\_calc\_zrot\_azel()}}
{\footnotesize\ttfamily  float pysoltrace.\+Py\+Sol\+Trace.\+util\+\_\+calc\+\_\+zrot\+\_\+azel (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{vect }\end{DoxyParamCaption})}

\begin{DoxyVerb}Compute the z-rotation of a vector, assuming the vector's deviation from (0,0,1) 
has been realized using azimuth-elevation transforms.

Parameters
----------
vect : (list OR Point)
    i,j,k components of a vector

Returns
----------
float
    Computed z-rotation (degrees)
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_aa5541b68fab7b61ae6497944a9e2ec8d}\label{classpysoltrace_1_1_py_sol_trace_aa5541b68fab7b61ae6497944a9e2ec8d}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!util\_matrix\_transpose@{util\_matrix\_transpose}}
\index{util\_matrix\_transpose@{util\_matrix\_transpose}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{util\_matrix\_transpose()}{util\_matrix\_transpose()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+util\+\_\+matrix\+\_\+transpose (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{m }\end{DoxyParamCaption})}

\begin{DoxyVerb}Calculate matrix transpose 

Parameters
----------
m : [[float,]*3]*3
    Square matrix 3x3 to be transposed.

Returns
----------
[[float,]*3]*3
    Square matrix 3x3, transpose of 'm'
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a4236679544a6427ef0db48bb9a5c7e98}\label{classpysoltrace_1_1_py_sol_trace_a4236679544a6427ef0db48bb9a5c7e98}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!util\_matrix\_vector\_mult@{util\_matrix\_vector\_mult}}
\index{util\_matrix\_vector\_mult@{util\_matrix\_vector\_mult}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{util\_matrix\_vector\_mult()}{util\_matrix\_vector\_mult()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+util\+\_\+matrix\+\_\+vector\+\_\+mult (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{m,  }\item[{}]{v }\end{DoxyParamCaption})}

\begin{DoxyVerb}Perform multiplication of a 3x3 matrix and a length-3 vector, returning the result vector.

Parameters
----------
m : list
    m[3][3] - a 3x3 matrix
v : list
    v[3] - a list, length 3

Returns
----------
list
    m x v [3]
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_ab4875d628e1f02b6429498116afe2683}\label{classpysoltrace_1_1_py_sol_trace_ab4875d628e1f02b6429498116afe2683}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!util\_rotation\_arbitrary@{util\_rotation\_arbitrary}}
\index{util\_rotation\_arbitrary@{util\_rotation\_arbitrary}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{util\_rotation\_arbitrary()}{util\_rotation\_arbitrary()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+util\+\_\+rotation\+\_\+arbitrary (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{theta,  }\item[{}]{axis,  }\item[{}]{axloc,  }\item[{}]{pt }\end{DoxyParamCaption})}

\begin{DoxyVerb}Rotation of a point 'pt' about an arbitrary axis with direction 'axis' centered at point 'axloc'. 
The point is rotated through 'theta' radians.

Parameters
----------
theta : float
    Angle of rotation (rad)
axis : Point()
    Vector (x=i,y=j,z=k) indicating direction of axis for rotation
axloc : Point()
    Location of the axis origin
pt : Point()
    Location of the point that is to be rotated

Returns
-----------
Point
    Point after rotation\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a61152a58b3fce9f1ee977ed652820008}\label{classpysoltrace_1_1_py_sol_trace_a61152a58b3fce9f1ee977ed652820008}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!util\_transform\_to\_local@{util\_transform\_to\_local}}
\index{util\_transform\_to\_local@{util\_transform\_to\_local}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{util\_transform\_to\_local()}{util\_transform\_to\_local()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+util\+\_\+transform\+\_\+to\+\_\+local (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{posref,  }\item[{}]{cosref,  }\item[{}]{origin,  }\item[{}]{rreftoloc }\end{DoxyParamCaption})}

\begin{DoxyVerb}Perform coordinate transformation from reference system to local system.

Parameters
----------
PosRef : [float,]*3
    X,Y,Z coordinates of ray point in reference system
CosRef : [float,]*3
    Direction cosines of ray in reference system
Origin : [float,]*3
    X,Y,Z coordinates of origin of local system as measured in reference system
RRefToLoc 
    Rotation matrices required for coordinate transform from reference to local

Returns
----------
(dict)  Keys in return dictionary include:
    posloc : ([float,]*3) X,Y,Z coordinates of ray point in local system
    cosloc : ([float,]*3) Direction cosines of ray in local system
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a60eaa62e41ad6d2b5441b815cb30660e}\label{classpysoltrace_1_1_py_sol_trace_a60eaa62e41ad6d2b5441b815cb30660e}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!util\_transform\_to\_ref@{util\_transform\_to\_ref}}
\index{util\_transform\_to\_ref@{util\_transform\_to\_ref}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{util\_transform\_to\_ref()}{util\_transform\_to\_ref()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+util\+\_\+transform\+\_\+to\+\_\+ref (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{posloc,  }\item[{}]{cosloc,  }\item[{}]{origin,  }\item[{}]{rloctoref }\end{DoxyParamCaption})}

\begin{DoxyVerb}Perform coordinate transformation from local system to reference system.

Parameters
----------
PosLoc : [float,]*3
    X,Y,Z coordinates of ray point in local system
CosLoc : [float,]*3
    Direction cosines of ray in local system
Origin : [float,]*3
    X,Y,Z coordinates of origin of local system as measured in reference system
RLocToRef 
    Rotation matrices required for coordinate transform from local to reference
    -- inverse of reference to local transformation

Returns
----------
dict  
    Keys in return dictionary include:
    posref : ([float,]*3) X,Y,Z coordinates of ray point in reference system
    cosref : ([float,]*3) Direction cosines of ray in reference system
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a2f8f2afc0d50794f8286a214b9015fe3}\label{classpysoltrace_1_1_py_sol_trace_a2f8f2afc0d50794f8286a214b9015fe3}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!validate@{validate}}
\index{validate@{validate}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{validate()}{validate()}}
{\footnotesize\ttfamily  bool pysoltrace.\+Py\+Sol\+Trace.\+validate (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Validate that the current SolTrace context has been configured correctly, and
that commonly missed inputs are specified.

Returns
----------
bool 
    False if error is identified, True otherwise
\end{DoxyVerb}
 \mbox{\Hypertarget{classpysoltrace_1_1_py_sol_trace_a2bee17e5e943c63646f691ebaff4a1eb}\label{classpysoltrace_1_1_py_sol_trace_a2bee17e5e943c63646f691ebaff4a1eb}} 
\index{pysoltrace.PySolTrace@{pysoltrace.PySolTrace}!write\_soltrace\_input\_file@{write\_soltrace\_input\_file}}
\index{write\_soltrace\_input\_file@{write\_soltrace\_input\_file}!pysoltrace.PySolTrace@{pysoltrace.PySolTrace}}
\doxysubsubsection{\texorpdfstring{write\_soltrace\_input\_file()}{write\_soltrace\_input\_file()}}
{\footnotesize\ttfamily def pysoltrace.\+Py\+Sol\+Trace.\+write\+\_\+soltrace\+\_\+input\+\_\+file (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{str}]{path }\end{DoxyParamCaption})}

\begin{DoxyVerb}Write a SolTrace input file (.stinput) based on the currently created API objects. This file is written
using the objects and data in the PySolTrace instance, not necessarily on what has been created in the 
coretrace 'context' data space. The 'context' may not match the PySolTrace instance if not all 'Create()' 
methods have been called. 

Parameters
==========
path : str
    Path and file name to be used to write the resulting .stinput file

Returns
=======
None
\end{DoxyVerb}
 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
pysoltrace.\+py\end{DoxyCompactItemize}
